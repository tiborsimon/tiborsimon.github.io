<div id="toc"></div>
<script type="text/javascript">
var toc_visible = true;
$(document).ready(function() {
    $('#toc').toc();
});

$(document).scroll(function() {
  var hh = $(.entry-content).height();  
  var y = $(this).scrollTop();
  if (y < hh) {
    if (!toc_visible) {
      toc_visible = true;
      $('#toc').fadeIn();
    }
  } else {
    if (toc_visible) {
      toc_visible = false;
      $('#toc').fadeOut();
    }
  }
});



</script>